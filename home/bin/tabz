#!/bin/bash

if [ -z "$1" ]; then
    echo "Usage: $0 <number>"
    exit 1
fi

num_spaces=$1


temp_file=$(mktemp)

output_file=$(mktemp)

echo "ðŸ¦† says â®ž Paste text & press Ctrl+D."
cat > "$temp_file"

clear
echo "--------"
echo " "

if [ "$num_spaces" -ge 0 ]; then
    spaces=$(printf '%*s' "$num_spaces")
    while IFS= read -r line; do
        echo "$spaces$line"
        echo "$spaces$line" >> "$output_file"
    done < "$temp_file"
    operation="increased"
else
    spaces_to_remove=$((num_spaces * -1))
    while IFS= read -r line; do
        processed_line=$(echo "$line" | sed "s/^ \{0,$spaces_to_remove\}//")
        echo "$processed_line"
        echo "$processed_line" >> "$output_file"
    done < "$temp_file"
    operation="decreased"
fi

# ðŸ¦† says â®ž xclip? auto  pasta
if command -v xclip >/dev/null 2>&1; then
    cat "$output_file" | xclip -selection clipboard
    echo "-------"
    echo "syntax $operation ${num_spaces#-} spaces"
    echo "-------"
    echo "âœ“ Copied!"
else
    echo "-------"
    echo "syntax $operation ${num_spaces#-} spaces"
    echo "-------"
    echo "xclip not installed!"
fi

# ðŸ¦† says â®ž cleanup
rm "$temp_file" "$output_file"
echo " "
